<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>Msgpack</title>
</head>
<body>
    <h1>Test MsgPack</h1>
    <script src="/lib/signalr.min.js"></script>
    <script src="/lib/msgpack5.min.js"></script>
    <script src="/lib/signalr-protocol-msgpack.min.js"></script>

    <script type="text/javascript">
        //var connection = new signalR.HubConnectionBuilder().withUrl("/hubs/loopymessage").build();
        var connection = new signalR.HubConnectionBuilder()
            .withUrl("/hubs/clock")
            .withHubProtocol(new signalR.protocols.msgpack.MessagePackHubProtocol())
            .build();

        connection.on("ShowTime", function (message) {
            console.log(message);
        });

        connection.on("Send", function (message) {
            console.log(message);
        });

        connection.start()
            .then(function () { console.log('SignalR Started...'); })
            .catch(function (err) { return console.error(err); });
    </script>
</body>
</html>
